create table attachments (id int8 generated by default as identity, content_type varchar(255) not null, created_date timestamp not null, name varchar(255) not null, primary key (id));
create table contacts (id int8 generated by default as identity, email varchar(255), phone_number varchar(255), primary key (id));
create table cost (id int8 generated by default as identity, max_value numeric(19, 2), min_value numeric(19, 2), value numeric(19, 2), type_id int8 not null, primary key (id));
create table cost_types (id int8 generated by default as identity, name varchar(255) not null, primary key (id));
create table idea_statuses (id int8 generated by default as identity, name varchar(255) not null, primary key (id));
create table ideas (id int8 generated by default as identity, address varchar(255), created_date timestamp not null, name varchar(255) not null, text varchar(255) not null, contact_id int8 not null, cost_id int8 not null, created_by_id int8 not null, status_id int8 not null, primary key (id));
create table ideas_attachments (idea_id int8 not null, attachments_id int8 not null);
create table roles (id int8 generated by default as identity, name varchar(255) not null, primary key (id));
create table user_role (user_id int8 not null, role_id int8 not null);
create table users (id int8 generated by default as identity, first_name varchar(255) not null, last_name varchar(255) not null, login varchar(255) not null, password varchar(255) not null, patronymic varchar(255), primary key (id));
create table votes (id int8 generated by default as identity, created_date timestamp not null, option_answer boolean not null, created_by_id int8 not null, voting_id int8 not null, primary key (id));
create table voting (id int8 generated by default as identity, created_date timestamp not null, required_votes int4 not null, created_by_id int8 not null, idea_id int8 not null, status_id int8 not null, type_id int8 not null, primary key (id));
create table voting_statuses (id int8 generated by default as identity, name varchar(255) not null, primary key (id));
create table voting_types (id int8 generated by default as identity, name varchar(255) not null, primary key (id));
alter table if exists ideas_attachments add constraint UK_6gyc59hxuo3tlocxuso8bxtvh unique (attachments_id);
alter table if exists users add constraint UK_ow0gan20590jrb00upg3va2fn unique (login);
alter table if exists cost add constraint FKbxaxdrf2v1j7buyupld2e8sui foreign key (type_id) references cost_types;
alter table if exists ideas add constraint FKl6eo287c1l0oiry3f5b2pkw3x foreign key (contact_id) references contacts;
alter table if exists ideas add constraint FKg7n7p0fts2bvcupgax083knr foreign key (cost_id) references cost;
alter table if exists ideas add constraint FKhi7vrhk67ioj1cxnlcjub1q2q foreign key (created_by_id) references users;
alter table if exists ideas add constraint FKpv6l76w0isvl7p4v9is0tmpl9 foreign key (status_id) references idea_statuses;
alter table if exists ideas_attachments add constraint FKaut56ip0a1v4j3afh1ya02ky3 foreign key (attachments_id) references attachments;
alter table if exists ideas_attachments add constraint FK1f5bebvfmenji8mg6vm7er1v2 foreign key (idea_id) references ideas;
alter table if exists user_role add constraint FKt7e7djp752sqn6w22i6ocqy6q foreign key (role_id) references roles;
alter table if exists user_role add constraint FKj345gk1bovqvfame88rcx7yyx foreign key (user_id) references users;
alter table if exists votes add constraint FKc0ugxx1wfgfgmq6hxh4sgf7y4 foreign key (created_by_id) references users;
alter table if exists votes add constraint FKm6yelwrlvug5gfcmv6w651py9 foreign key (voting_id) references voting;
alter table if exists voting add constraint FK9jt19tnexg7d1b03qhi5a8r5u foreign key (created_by_id) references users;
alter table if exists voting add constraint FKishislpwsf5xfp48wk4au1vb5 foreign key (idea_id) references ideas;
alter table if exists voting add constraint FKon3svv1q6dpqsyaj11osceqst foreign key (status_id) references voting_statuses;
alter table if exists voting add constraint FKcbsxcgvwkdrthasupdxt82xjd foreign key (type_id) references voting_types;